<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><title>Client - Core Functions - TerminusDB Documentation</title><link rel="shortcut icon" href="/docs/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/docs/assets/css/just-the-docs.css"><link href="https://fonts.googleapis.com/css?family=Lexend+Deca&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Poppins&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1" crossorigin="anonymous"> <script type="text/javascript" src="/docs/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/docs/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Client - Core Functions | TerminusDB Documentation</title><meta name="generator" content="Jekyll v3.8.7" /><meta property="og:title" content="Client - Core Functions" /><meta property="og:locale" content="en_US" /><meta name="description" content="Documentation for TerminusDB" /><meta property="og:description" content="Documentation for TerminusDB" /><link rel="canonical" href="/docs/reference/js-client/core/" /><meta property="og:url" content="/docs/reference/js-client/core/" /><meta property="og:site_name" content="TerminusDB Documentation" /> <script type="application/ld+json"> {"description":"Documentation for TerminusDB","@type":"WebPage","url":"/docs/reference/js-client/core/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://terminusdb.com/img/logos/logo.svg"}},"headline":"Client - Core Functions","@context":"https://schema.org"}</script> <script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script> <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt=""/></noscript> <script> var _paq = window._paq || []; /* tracker methods like "setCustomDimension" should be called before "trackPageView" */ _paq.push(['disableCookies']); _paq.push(['trackPageView']); _paq.push(['enableLinkTracking']); (function() { var u="https://terminusdb.matomo.cloud/"; _paq.push(['setTrackerUrl', u+'matomo.php']); _paq.push(['setSiteId', '1']); var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript'; g.async=true; g.defer=true; g.src='//cdn.matomo.cloud/terminusdb.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s); })(); </script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"><title>Link</title><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg><div class="page-wrap"><div class="side-bar"><div class="site-header"> <a href="https://terminusdb.com/documentation" class="site-title lh-tight"><div class="site-logo"></div></a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button></div><div class="navigation main-nav js-main-nav"><nav role="navigation" aria-label="Main navigation"><ul class="navigation-list"><li class="navigation-list-item active"> <a href="https://terminusdb.com/documentation" class="navigation-list-link active">Home</a><li class="navigation-list-item"><li class="navigation-list-item"><a href="/docs/quickstart/" class="navigation-list-link">Quickstart Academy</a><li class="navigation-list-item"><a href="/docs/tutorials" class="navigation-list-link">Tutorials</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/tutorials/clone-tutorial/" class="navigation-list-link">My First Cloned Database</a><li class="navigation-list-item "><a href="/docs/tutorials/share-tutorial/" class="navigation-list-link">My First Shared Database</a><li class="navigation-list-item "><a href="/docs/tutorials/push-pull-tutorial/" class="navigation-list-link">Pushing and Pulling Changes</a><li class="navigation-list-item "><a href="/docs/tutorials/branch-tutorial/" class="navigation-list-link">Creating and Merging Branches</a><li class="navigation-list-item "><a href="/docs/tutorials/knowledge-graph/" class="navigation-list-link">Taking TerminusDB to the Bank</a><li class="navigation-list-item "><a href="/docs/tutorials/csv-tutorial/" class="navigation-list-link">Importing and Cleaning Data From CSVs</a></ul><li class="navigation-list-item active"><a href="/docs/reference/" class="navigation-list-link">Reference</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/reference/server" class="navigation-list-link">Server</a><li class="navigation-list-item active"><a href="/docs/reference/js-client/" class="navigation-list-link">JS Client</a><ul class="navigation-list-grand-child-list"><li class="navigation-list-item "> <a href="/docs/reference/js-client/installation/" class="navigation-list-link">Installation</a><li class="navigation-list-item active"> <a href="/docs/reference/js-client/core/" class="navigation-list-link active">Client - Core Functions</a></ul><li class="navigation-list-item "><a href="/docs/reference/python-client/" class="navigation-list-link">Python Client</a><li class="navigation-list-item "><a href="/docs/reference/bootstrap" class="navigation-list-link">Bootstrap</a><li class="navigation-list-item "><a href="/docs/reference/web-components" class="navigation-list-link">Console</a><li class="navigation-list-item "><a href="/docs/reference/woql" class="navigation-list-link">WOQL.js - the Definitive Guide</a></ul><li class="navigation-list-item"><a href="/docs/how-tos" class="navigation-list-link">How Tos</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/how-tos/installation/" class="navigation-list-link">Installation</a><li class="navigation-list-item "><a href="/docs/how-tos/other-install/" class="navigation-list-link">Other ways of installing TerminusDB</a><li class="navigation-list-item "><a href="/docs/how-tos/manage-collaborators/" class="navigation-list-link">Manage Collaborators</a><li class="navigation-list-item "><a href="/docs/how-tos/synchronise/" class="navigation-list-link">Synchronising Changes</a><li class="navigation-list-item "><a href="/docs/how-tos/time-travel/" class="navigation-list-link">Time Travel</a><li class="navigation-list-item "><a href="/docs/how-tos/branch/" class="navigation-list-link">Create and Merge Branches</a><li class="navigation-list-item "><a href="/docs/how-tos/import-data/" class="navigation-list-link">Import and Clean Data</a><li class="navigation-list-item "><a href="/docs/how-tos/query/" class="navigation-list-link">Query</a><li class="navigation-list-item "><a href="/docs/how-tos/schema/" class="navigation-list-link">Create Schema</a><li class="navigation-list-item "><a href="/docs/how-tos/python" class="navigation-list-link">Python How Tos</a><li class="navigation-list-item "><a href="/docs/how-tos/beta/" class="navigation-list-link">Accessing TerminusHub with Bootstrap - Certificate Help</a></ul><li class="navigation-list-item"><a href="/docs/discussion" class="navigation-list-link">Discussion</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/discussion/baisc/" class="navigation-list-link">Basic Ideas</a><li class="navigation-list-item "><a href="/docs/discussion/collaboration/" class="navigation-list-link">Collaboration</a><li class="navigation-list-item "><a href="/docs/discussion/branch/" class="navigation-list-link">Branching and Merging</a><li class="navigation-list-item "><a href="/docs/discussion/storage/" class="navigation-list-link">Storage</a><li class="navigation-list-item "><a href="/docs/discussion/data-model/" class="navigation-list-link">Data Modeling</a><li class="navigation-list-item "><a href="/docs/discussion/query/" class="navigation-list-link">Querying</a><li class="navigation-list-item "><a href="/docs/discussion/reserach/" class="navigation-list-link">Research Papers</a></ul><li class="navigation-list-item"><a href="/docs/release-notes/" class="navigation-list-link">Release notes</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/release-notes/upgrade/" class="navigation-list-link">Upgrade</a></ul><li class="navigation-list-item"><a href="/docs/frequently-asked-questions/" class="navigation-list-link">FAQs</a></ul></nav></div><footer class="site-footer"><p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p></footer></div><div class="main-content-wrap js-main-content" tabindex="0"><div class="main-content"><header class="header header--dark"><div class="wrapper wrapper--increased"><nav class="menu"><div class="menu__body"><ul class="menu__list"><li class="menu__item"> <a href="https://terminusdb.com/docs/" target="_self" class="menu__link menu__link--active" aria-label="Documentation"> Documentation </a><li class="menu__item"> <a href="https://terminusdb.com/community/" target="_self" class="menu__link " aria-label="Community"> Community </a><li class="menu__item"> <a href="https://terminusdb.com/blog/" target="_self" class="menu__link" aria-label="Blog"> Blog </a><li class="menu__item"> <a href="https://terminusdb.com/hub/" target="_self" class="menu__link" aria-label="Blog"> Terminus Hub </a><li class="menu__item menu__item--full-devices"><ul class="menu__social-list"><li class="menu__social-item"> <a href="https://twitter.com/TerminusDB" class="menu__social-link" target="_blank"> <i class="icon-twitter menu__icon"></i> </a><li class="menu__social-item"> <a href="https://github.com/terminusdb/terminusdb-server" class="menu__social-link" target="_blank" aria-label="Github link"> <i class="icon-github-logo menu__icon"></i> </a><li class="menu__social-item"><a href="https://www.youtube.com/channel/UC5kZt8pP-FM0u-R0BQr78YA/featured" class="menu__social-link" target="_blank"><i class="icon-youtube menu__icon"></i></a><li class="menu__social-item"><a href="https://www.linkedin.com/company/terminusdb/" class="menu__social-link" target="_blank"><i class="icon-linkedin menu__icon"></i></a></ul><li class="menu__item menu__item--full-devices"> <a href="https://terminusdb.com/hub/download" target="_self" class="menu__button" aria-label="Download center"> Download Center </a></ul><ul class="menu__footer"><li class="menu__secondary-item"> <a href="https://terminusdb.com" role="button"> <img src="https://terminusdb.com/img/logos/logo.svg" class="menu__secondary-logo" alt="Terminus DB logo"> </a><li class="menu__secondary-item"><p class="menu__copyright"> ©2020 - TerminusDB | All right reserved</p></ul></div><button id="burger" class="menu__burger" role="button" aria-label="Navigation burger button"> <span></span> <span></span> <span></span> </button></nav></div></header><div class="page-header js-page-header"><div class="search"><div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search TerminusDB Documentation" aria-label="Search TerminusDB Documentation" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg></div><div class="js-search-results search-results-wrap"></div></div><ul class="list-style-none text-small aux-nav"><li class="d-inline-block my-0"><a href="https://terminusdb.com">TerminusDB Homepage</a></ul></div><div class="page"><nav class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/reference/">Reference</a><li class="breadcrumb-nav-list-item"><a href="/docs/reference/js-client/">JS Client</a><li class="breadcrumb-nav-list-item"><span>Client - Core Functions</span></ol></nav><div id="main-content" class="page-content" role="main"><h1 class="no_toc" id="client-core-functions"> <a href="#client-core-functions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Client core functions</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#import-script" id="markdown-toc-import-script">Import Script</a><li><a href="#npm" id="markdown-toc-npm">NPM:</a><ol><li><a href="#woqlclient-class" id="markdown-toc-woqlclient-class">WOQLClient Class</a><li><a href="#terminusdb-client-api" id="markdown-toc-terminusdb-client-api">TerminusDB Client API</a><ol><li><a href="#connect" id="markdown-toc-connect">Connect</a><li><a href="#create-database" id="markdown-toc-create-database">Create Database</a><li><a href="#delete-database" id="markdown-toc-delete-database">Delete Database</a><li><a href="#create-graph" id="markdown-toc-create-graph">Create Graph</a><li><a href="#delete-graph" id="markdown-toc-delete-graph">Delete Graph</a><li><a href="#get-triples" id="markdown-toc-get-triples">Get Triples</a><li><a href="#update-triples" id="markdown-toc-update-triples">Update Triples</a><li><a href="#query" id="markdown-toc-query">Query</a><li><a href="#clonedb" id="markdown-toc-clonedb">Clonedb</a><li><a href="#branch" id="markdown-toc-branch">Branch</a><li><a href="#rebase" id="markdown-toc-rebase">Rebase</a><li><a href="#pull" id="markdown-toc-pull">Pull</a><li><a href="#push" id="markdown-toc-push">Push</a><li><a href="#fetch" id="markdown-toc-fetch">Fetch</a></ol><li><a href="#accessing-and-changing-client-context" id="markdown-toc-accessing-and-changing-client-context">Accessing and Changing Client Context</a><ol><li><a href="#organization" id="markdown-toc-organization">organization</a><li><a href="#db" id="markdown-toc-db">db</a><li><a href="#repo" id="markdown-toc-repo">repo</a><li><a href="#checkout" id="markdown-toc-checkout">checkout</a><li><a href="#ref" id="markdown-toc-ref">ref</a></ol><li><a href="#how-context-affects-api-calls" id="markdown-toc-how-context-affects-api-calls">How Context Affects API Calls</a><li><a href="#setting-and-getting-client-configuration-options" id="markdown-toc-setting-and-getting-client-configuration-options">Setting and Getting Client Configuration Options</a><ol><li><a href="#server" id="markdown-toc-server">server</a><li><a href="#api" id="markdown-toc-api">api</a><li><a href="#uid" id="markdown-toc-uid">uid</a><li><a href="#user_organization" id="markdown-toc-user_organization">user_organization</a><li><a href="#local-auth" id="markdown-toc-local-auth">local auth</a><li><a href="#remote-auth" id="markdown-toc-remote-auth">remote auth</a><li><a href="#databases" id="markdown-toc-databases">databases</a><li><a href="#get-database" id="markdown-toc-get-database">get database</a><li><a href="#author" id="markdown-toc-author">author</a><li><a href="#set-system-db" id="markdown-toc-set-system-db">set system db</a><li><a href="#set" id="markdown-toc-set">set</a></ol><li><a href="#utility-functions" id="markdown-toc-utility-functions">Utility Functions</a><ol><li><a href="#copy" id="markdown-toc-copy">copy</a><li><a href="#resource" id="markdown-toc-resource">resource</a></ol></ol></ol><hr /><h2 id="import-script"> <a href="#import-script" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Import Script</h2><h1 id="npm"> <a href="#npm" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> NPM:</h1><p>NPM:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nx">TerminusClient</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@terminusdb/terminusdb-client</span><span class="dl">'</span>

</code></pre></div></div><p>Script:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span> <span class="p">...</span><span class="o">/&gt;</span>
</code></pre></div></div><h2 id="woqlclient-class"> <a href="#woqlclient-class" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> WOQLClient Class</h2><p>The core functionality of the TerminusDB javascript client is defined in the WOQLClient class - in the woqlClient.js file. This class provides methods which allow you to directly get and set all of the configuration and API endpoints of the client. The other parts of the WOQL core - connectionConfig.js and connectionCapabilities.js - are used by the client to store internal state - they should never have to be accessed directly. For situations where you want to communicate with a TerminusDB server API, the WOQLClient class is all you will need.</p><p>Basic Usage:</p><div class="anchor-sub-parts">Example</div><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TerminusClient</span><span class="p">.</span><span class="nx">Client</span><span class="p">(</span><span class="nx">SERVER_URL</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">(</span><span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">)</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">checkout</span><span class="p">(</span><span class="dl">"</span><span class="s2">dev</span><span class="dl">"</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nx">turtle</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getTriples</span><span class="p">(</span><span class="dl">"</span><span class="s2">schema</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><p>The client has an internal state which defines what organization / database / repository / branch / ref it is currently attached to</p><h2 id="terminusdb-client-api"> <a href="#terminusdb-client-api" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> TerminusDB Client API</h2><h3 id="connect"> <a href="#connect" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Connect</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
</code></pre></div></div><p>Description: Connect to a TerminusDB server and retrieve information about the current user’s capabilities and resources on the server.</p><p>Status: stable</p><p>Arguments:</p><ul><li>server: (string) URL of the TerminusDB server to connect to<li>options: (json) options for connect<ul><li>organization: (string) the id of the organization to connect to (in desktop use, this will always be “admin”)<li>db: (string) the id of the database to connect to<li>local_auth: (json) a local auth configuration used to authenticate the client to the local server<li>key: (string) basic auth password<li>user: (string) basic auth username (always admin in desktop mode)<li>remote_auth: (json) a remote auth configuration - passed to the server to authenticate itself to remote servers during pull / push / clone / fork / fetch<li>branch: (string) id of branch to connect to (defaults to main)<li>ref: (string) id of the commit to connect to (defaults to head)<li>repo: (string) id of the repository to connect to (defaults to local)</ul></ul><p>Return Type:</p><ul><li>a JSON-LD document of system:User class [link]</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://127.0.0.1:6363/</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="nx">key</span><span class="o">=</span><span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">})</span>
</code></pre></div></div><h3 id="create-database"> <a href="#create-database" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Create Database</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">createDatabase</span><span class="p">(</span><span class="nx">dbid</span><span class="p">,</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">orgid</span><span class="p">)</span>
</code></pre></div></div><p>Description: Creates a new database in TerminusDB server</p><p>Status: stable</p><p>Arguments:</p><ul><li>dbid: (string - mandatory) The id of the new database to be created<li>doc: (json - mandatory) a json object containing details of the database to be created:<ul><li>label (string - mandatory) the display name of the database<li>comment (string - mandatory) text describing the database<li>prefixes (json - optional) json containing:<ul><li>doc: (string) the IRI to use when doc: prefixes are expanded (defaults to terminusdb:///data)<li>scm: (string) the IRI to use when scm: prefixes are expanded (defaults to terminusdb:///schema)</ul><li>schema (boolean - optional) if set to true, a main schema graph will be created, if not set, only a main instance graph will be created orgid: (string - optional) the id of the organization to create the database within (in desktop use, this should always be “admin”)</ul></ul><p>Returns Promise: HTTP 200 status on success, HTTP error code on failure</p><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">createDatabase</span><span class="p">(</span><span class="dl">"</span><span class="s2">mydb</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">label</span><span class="p">:</span> <span class="dl">"</span><span class="s2">My Database</span><span class="dl">"</span><span class="p">,</span> <span class="na">comment</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Testing</span><span class="dl">"</span><span class="p">,</span> <span class="na">schema</span><span class="p">:</span> <span class="kc">true</span><span class="p">})</span>
</code></pre></div></div><h3 id="delete-database"> <a href="#delete-database" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Delete Database</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">deleteDatabase</span><span class="p">(</span><span class="nx">dbid</span><span class="p">,</span> <span class="nx">orgid</span><span class="p">)</span>
</code></pre></div></div><p>Description: Deletes a database from a TerminusDB server</p><p>Status: stable</p><p>Arguments:</p><ul><li>dbid: (string - mandatory) The id of the database to be deleted<li>orgid: (string - optional) the id of the organization to which the database belongs (in desktop use, this will always be “admin”)</ul><p>Returns HTTP 200 status on success, HTTP error code on failure</p><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">deleteDatabase</span><span class="p">(</span><span class="dl">"</span><span class="s2">mydb</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><p>Returns Promise: HTTP 200 status on success, HTTP error code on failure</p><h3 id="create-graph"> <a href="#create-graph" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Create Graph</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">createGraph</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">gid</span><span class="p">,</span> <span class="nx">commit_msg</span><span class="p">)</span>
</code></pre></div></div><p>Description: Creates a new named graph within a TerminusDB database</p><p>Status: stable</p><p>Arguments:</p><ul><li>type: (string - mandatory) - type of graph to create, either “instance”, “schema” or “inference”<li>gid: (string - mandatory) - id of the graph to be created<li>commit_msg (string - optional) - a message describing the reason for the change that will be written into the commit log</ul><p>Returns Promise: HTTP 200 status on success, HTTP error code on failure</p><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">createGraph</span><span class="p">(</span><span class="dl">"</span><span class="s2">schema</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">alt</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Adding new schema graph</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="delete-graph"> <a href="#delete-graph" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Delete Graph</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">deleteGraph</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">gid</span><span class="p">,</span> <span class="nx">commit_msg</span><span class="p">)</span>
</code></pre></div></div><p>Description: Deletes a graph from a TerminusDB database</p><p>Status: stable</p><p>Arguments:</p><ul><li>type: (string - mandatory) - type of graph to create, either “instance”, “schema” or “inference”<li>gid: (string - mandatory) - id of the graph to be created<li>commit_msg (string - optional) - a message describing the reason for the change that will be written into the commit log</ul><p>Returns Promise: HTTP 200 status on success, HTTP error code on failure</p><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">deleteGraph</span><span class="p">(</span><span class="dl">"</span><span class="s2">schema</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">alt</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Deleting alt schema graph</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="get-triples"> <a href="#get-triples" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Get Triples</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">getTriples</span><span class="p">(</span><span class="nx">gtype</span><span class="p">,</span> <span class="nx">gid</span><span class="p">)</span>
</code></pre></div></div><p>Description: Retrieve the contents of a graph within a TerminusDB as triples, encoded in the turtle (ttl) format</p><p>Status: stable</p><p>Arguments:</p><ul><li>gtype: (string - mandatory) - type of graph to get triples from, either “instance”, “schema” or “inference”<li>gid: (string - mandatory) - id of the graph to read from</ul><p>Returns Promise: HTTP 200 status on success with the contents being a string representing a set of triples in turtle (ttl) format, HTTP error code on failure</p><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">turtle</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getTriples</span><span class="p">(</span><span class="dl">"</span><span class="s2">schema</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">alt</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="update-triples"> <a href="#update-triples" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Update Triples</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">updateTriples</span><span class="p">(</span><span class="nx">gtype</span><span class="p">,</span> <span class="nx">gid</span><span class="p">,</span> <span class="nx">turtle</span><span class="p">,</span> <span class="nx">commit_msg</span><span class="p">)</span>
</code></pre></div></div><p>Description: Replace the contents of the specified graph with the passed triples encoded in the turtle (ttl) format</p><p>Status: stable</p><p>Arguments:</p><ul><li>gtype: (string - mandatory) - type of graph to get triples from, either “instance”, “schema” or “inference”<li>gid: (string - mandatory) - id of the graph to read from<li>turtle: (string - mandatory) - string encoding triples in turtle (ttl) format<li>commit_msg (string - optional) - a message describing the reason for the change that will be written into the commit log</ul><p>Returns Promise: HTTP 200 status on success, HTTP error code on failure</p><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">updateTriples</span><span class="p">(</span><span class="dl">"</span><span class="s2">schema</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">alt</span><span class="dl">"</span><span class="p">,</span> <span class="nx">turtle_string</span><span class="p">,</span> <span class="dl">"</span><span class="s2">dumping triples to graph alt</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="query"> <a href="#query" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Query</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">woql</span><span class="p">,</span> <span class="nx">commit_msg</span><span class="p">)</span>
</code></pre></div></div><p>Description: send a Web Object Query Language query to the server</p><p>Status: stable</p><p>Arguments:</p><ul><li>woql: (WOQLQuery Object - mandatory) - an instance of the WOQLQuery class<li>commit_msg (string - optional) - a message describing the reason for the change that will be written into the commit log (only relevant if the query contains an update)</ul><p>Returns Promise: HTTP 200 status on success, contents being a WOQL Query Response, HTTP error code on failure</p><ul><li>api:WoqlResponse<ul><li>bindings: (Array) - an array of json values, each representing a single result, with each being indexed by variables<li>api:variable_names: (Array) - an array of strings, which shows the order in which variables were used in the query<li>deletes: (int) - the number of triples that were deleted by the query<li>inserts: (int) - the number of triples that were inserted by the query<li>transaction_retry_count: (int) - the number of times the transaction was restarted due to contention</ul></ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">WOQL</span><span class="p">.</span><span class="nx">star</span><span class="p">())</span>
</code></pre></div></div><h3 id="clonedb"> <a href="#clonedb" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Clonedb</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">clonedb</span><span class="p">(</span><span class="nx">clone_source</span><span class="p">,</span> <span class="nx">newid</span><span class="p">,</span> <span class="nx">orgid</span><span class="p">)</span>
</code></pre></div></div><p>Description: Clones a remote DB to the local server</p><p>Status: Stable</p><p>Arguments:</p><ul><li>clone_source: (json - mandatory) json describing the source branch to be used as a base<ul><li>remote_url: (string - mandatory) - The URL of the database to be cloned (the URL is always of the form https://server/organization_id/database_id )<li>label (string - mandatory) the display name of the new cloned database<li>comment (string - mandatory) text describing the new cloned database</ul><li>newid: (string - mandatory) id of the new cloned database on the local server<li>orgid: (string - optional) id of the local organization that the new cloned database will be created in (in desktop mode this is always “admin”)</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">clonedb</span><span class="p">({</span><span class="na">remote_url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://my.terminusdb.com/myorg/mydb</span><span class="dl">"</span><span class="p">,</span> <span class="nx">label</span> <span class="dl">"</span><span class="s2">Cloned DB</span><span class="dl">"</span><span class="p">,</span> <span class="na">comment</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Cloned from mydb</span><span class="dl">"</span><span class="p">},</span> <span class="nx">newid</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mydb</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="branch"> <a href="#branch" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Branch</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">branch</span><span class="p">(</span><span class="nx">new_branch_id</span><span class="p">)</span>
</code></pre></div></div><p>Description: creates a new branch with a TerminusDB database, starting from the current context of the client (branch / ref)</p><p>Status: Stable</p><p>Arguments:</p><ul><li>new_branch_id: (string - mandatory) - the ID of the new branch to be created</ul><p>Returns Promise: HTTP 200 status on success, HTTP error code on failure</p><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">branch</span><span class="p">(</span><span class="dl">"</span><span class="s2">dev</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="rebase"> <a href="#rebase" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Rebase</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">rebase</span><span class="p">(</span><span class="nx">rebase_source</span><span class="p">)</span>
</code></pre></div></div><p>Description: Merges the passed branch into the current one using the rebase operation</p><p>Status: Stable</p><p>Arguments:</p><ul><li>rebase_source: (json - mandatory) json describing the source branch to be used as a base<ul><li>rebase_from: (string - mandatory) - branch id to be rebased from<li>message (string - optional) - a message describing the reason for the change that will be written into the commit log</ul></ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">rebase</span><span class="p">({</span><span class="na">rebase_from</span><span class="p">:</span> <span class="dl">"</span><span class="s2">dev</span><span class="dl">"</span><span class="p">,</span> <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Merging from dev</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="pull"> <a href="#pull" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Pull</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">pull</span><span class="p">(</span><span class="nx">remote_source_descriptor</span><span class="p">)</span>
</code></pre></div></div><p>Description: Pull changes from a branch on a remote database to a branch on a local database</p><p>Status: Stable</p><p>Arguments:</p><ul><li>remote_source_descriptor: (json - mandatory) an object describing the source of the pull<ul><li>remote: (string - mandatory) - the id of the remote repo (normally origin)<li>remote_branch: (string - mandatory) - the id of the remote branch to pull from<li>message (string - optional) - a message describing the reason for the change that will be written into the commit log</ul></ul><p>Returns Promise: HTTP 200 status on success, HTTP error code on failure</p><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">pull</span><span class="p">({</span><span class="na">remote</span><span class="p">:</span> <span class="dl">"</span><span class="s2">origin</span><span class="dl">"</span><span class="p">,</span> <span class="na">remote_branch</span><span class="p">:</span> <span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">,</span> <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Pulling from remote</span><span class="dl">"</span><span class="p">})</span>
</code></pre></div></div><h3 id="push"> <a href="#push" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Push</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">remote_target_descriptor</span><span class="p">)</span>
</code></pre></div></div><p>Description: Push changes from a branch on a local database to a branch on a remote database</p><p>Status: Stable</p><p>Arguments:</p><ul><li>remote_target_descriptor: (json - mandatory) an object describing the target of the push<ul><li>remote: (string - mandatory) - the id of the remote repo (normally origin)<li>remote_branch: (string - mandatory) - the id of the remote branch to push to<li>message (string - optional) - a message describing the reason for the change that will be written into the commit log</ul></ul><p>Returns Promise: HTTP 200 status on success, HTTP error code on failure</p><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="na">remote</span><span class="p">:</span> <span class="dl">"</span><span class="s2">origin</span><span class="dl">"</span><span class="p">,</span> <span class="na">remote_branch</span><span class="p">:</span> <span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">,</span> <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Pulling from remote</span><span class="dl">"</span><span class="p">})</span>
</code></pre></div></div><h3 id="fetch"> <a href="#fetch" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Fetch</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(</span><span class="nx">remote_id</span><span class="p">)</span>
</code></pre></div></div><p>Description: Fetch updates to a remote database to a remote repository with the local database</p><p>Status: Stable</p><p>Arguments:</p><ul><li>remote_id (string - required) the id of the remote to fetch (normally origin)</ul><p>Returns Promise: HTTP 200 status on success, HTTP error code on failure</p><h2 id="accessing-and-changing-client-context"> <a href="#accessing-and-changing-client-context" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Accessing and Changing Client Context</h2><p>The client’s has an internal context which defines which allows the user to invoke the API actions against any valid resource in the database. For example, by specifying a particular commit id as the source of a query operation, all queries will be made against the state of the database as it was immediately after that specific commit was completed. All of these methods are both getters and setters with 0 or 1 arguments - if no argument is supplied, they get the current value, if an argument is supplied they set the current value for that part of context</p><p>Methods</p><ul><li>organization<li>db<li>repo<li>checkout<li>ref</ul><h3 id="organization"> <a href="#organization" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> organization</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">organization</span><span class="p">(</span><span class="nx">orgid</span><span class="p">)</span>
</code></pre></div></div><p>Description: Gets and Sets the client’s internal organization context value</p><p>Status: Stable</p><p>Arguments:</p><ul><li>orgid: (string - optional) the organization id to set the context to</ul><p>Returns</p><ul><li>(string) the current organization id within the client context</ul><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">organization</span><span class="p">(</span><span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="db"> <a href="#db" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> db</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">(</span><span class="nx">dbid</span><span class="p">)</span>
</code></pre></div></div><p>Description: Gets and Sets the client’s internal db context value</p><p>Status: Stable</p><p>Arguments:</p><ul><li>dbid: (string - optional) the database id to set the context to</ul><p>Returns</p><ul><li>(string) the current database id within the client context</ul><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">(</span><span class="dl">"</span><span class="s2">mydb</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="repo"> <a href="#repo" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> repo</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">repo</span><span class="p">(</span><span class="nx">repoid</span><span class="p">)</span>
</code></pre></div></div><p>Description: Gets and Sets the client’s internal repository context value (defaults to ‘local’)</p><p>Status: Stable</p><p>Arguments:</p><ul><li>repoid: (string - optional) the repository id to set the context to</ul><p>Returns</p><ul><li>(string) the current repository id within the client context</ul><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">repo</span><span class="p">(</span><span class="dl">"</span><span class="s2">origin</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="checkout"> <a href="#checkout" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> checkout</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">checkout</span><span class="p">(</span><span class="nx">branch_id</span><span class="p">)</span>
</code></pre></div></div><p>Description: Gets and Sets the client’s internal branch context value (defaults to ‘main’)</p><p>Status: Stable</p><p>Arguments:</p><ul><li>branch_id: (string - optional) the branch id to set the context to</ul><p>Returns</p><ul><li>(string) the current branch id within the client context</ul><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">checkout</span><span class="p">(</span><span class="dl">"</span><span class="s2">dev</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="ref"> <a href="#ref" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> ref</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">ref</span><span class="p">(</span><span class="nx">commit_id</span><span class="p">)</span>
</code></pre></div></div><p>Description: Gets and Sets the client’s internal ref context value (defaults to false)</p><p>Status: Stable</p><p>Arguments:</p><ul><li>commit_id: (string - optional) the commit id to set the context to</ul><p>Returns</p><ul><li>(string) the current commit id within the client context</ul><p>Example</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">ref</span><span class="p">(</span><span class="dl">"</span><span class="s2">mkz98k2h3j8cqjwi3wxxzuyn7cr6cw7</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h2 id="how-context-affects-api-calls"> <a href="#how-context-affects-api-calls" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> How Context Affects API Calls</h2><div class="table-wrapper"><table><thead><tr><th>API Call<th>organization<th>db<th>repo<th>checkout<th>ref<tbody><tr><td>connect<td>set organization context<td>set db context<td>set repo context<td>set branch context<td>set commit context<tr><td>createDatabase<td>db created in organization<td>NA<td>NA<td>NA<td>NA<tr><td>deleteDatabase<td>db deleted from organization<td>Database to be deleted<td>NA<td>NA<td>NA<tr><td>createGraph<td>db from organization<td>Database for operation<td>local<td>graph created in branch<td>NA<tr><td>deleteGraph<td>db from organization<td>Database for operation<td>local<td>graph deleted in branch<td>NA<tr><td>getTriples<td>db from organization<td>Database for operation<td>Repository for operation<td>branch for operation<td>commit base for operation*<tr><td>updateTriples<td>db from organization<td>Database for operation<td>local<td>NA<td>NA<tr><td>query<td>db from organization<td>Database for operation<td>Repository for operation<td>branch to be queried<td>commit root for query*<tr><td>clonedb<td>db from organization<td>Database for operation<td>local<td>NA<td>NA<tr><td>branch<td>db from organization<td>Database for operation<td>Repository of branch origin<td>branch (head) of origin<td>commit id of branch origin*<tr><td>rebase<td>db from organization<td>Database for operation<td>Repository of rebase target<td>rebase to target branch<td>NA<tr><td>push<td>db from organization<td>Database for operation<td>local<td>push from branch<td>NA<tr><td>pull<td>db from organization<td>Database for operation<td>local<td>pull to branch<td>NA<tr><td>fetch<td>db from organization<td>Database for operation<td>NA<td>NA<td>NA</table></div><ul><li>note ref and checkout are mutually exclusive - if the ref is set it will be used and the branch will be ignored</ul><h2 id="setting-and-getting-client-configuration-options"> <a href="#setting-and-getting-client-configuration-options" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Setting and Getting Client Configuration Options</h2><ul><li>server<li>api<li>uid<li>user_organization<li>local_auth<li>remote_auth<li>databases<li>get_database<li>author<li>set_system_db<li>set</ul><h3 id="server"> <a href="#server" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> server</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">server</span><span class="p">()</span>
</code></pre></div></div><p>Description: Retrieve the URL of the server that we are currently connected to</p><p>Status: Stable</p><p>Arguments: None</p><p>Returns:</p><ul><li>(string) the URL of the TerminusDB server endpoint we are connected to</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">server_url</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">server</span><span class="p">()</span>
</code></pre></div></div><h3 id="api"> <a href="#api" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> api</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">api</span><span class="p">()</span>
</code></pre></div></div><p>Description: Retrieve the URL of the server’s API base that we are currently connected to</p><p>Status: Stable</p><p>Arguments: None</p><p>Returns:</p><ul><li>(string) the URL of the TerminusDB server api endpoint we are connected to (typically server() + “api/”)</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">api_url</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">api</span><span class="p">()</span>
</code></pre></div></div><h3 id="uid"> <a href="#uid" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> uid</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">uid</span><span class="p">()</span>
</code></pre></div></div><p>Description: Retrieve the id of the user that is logged in with the client</p><p>Status: Stable</p><p>Arguments: None</p><p>Returns:</p><ul><li>(string) the id of the current user (always ‘admin’ for desktop client)</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">server_url</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">server</span><span class="p">()</span>
</code></pre></div></div><h3 id="user_organization"> <a href="#user_organization" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> user_organization</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">user_organization</span><span class="p">()</span>
</code></pre></div></div><p>Description: Retrieve the id of the organization that the user currently belongs to</p><p>Status: Stable</p><p>Arguments: None</p><p>Returns:</p><ul><li>(string) the id of the current user (always ‘admin’ for desktop client)</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">org</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">user_organization</span><span class="p">()</span>
</code></pre></div></div><h3 id="local-auth"> <a href="#local-auth" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> local auth</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">local_auth</span><span class="p">(</span><span class="nx">credentials</span><span class="p">)</span>
</code></pre></div></div><p>Description: Gets / sets the credentials for connecting to the local terminusdb-server</p><p>Status: Stable</p><p>Arguments:</p><ul><li>credentials: (json - optional) the credentials to use to authenticate to local TerminusDB server<ul><li>type: (string - mandatory) either “jwt” or “basic”<li>key: (string - mandatory) either the jwt token or the basic auth password depending on the type field<li>user: (string - optional) the user id to use for basic authentication - defaults to “admin” Returns:</ul><li>(json) the current local credentials as a json</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">local_auth</span><span class="p">({</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">basic</span><span class="dl">"</span><span class="p">,</span> <span class="na">user</span><span class="p">:</span> <span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span><span class="p">,</span> <span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">root</span><span class="dl">"</span> <span class="p">})</span>
</code></pre></div></div><h3 id="remote-auth"> <a href="#remote-auth" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> remote auth</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">remote_auth</span><span class="p">(</span><span class="nx">credentials</span><span class="p">)</span>
</code></pre></div></div><p>Description: Gets / sets the credentials for connecting to a remote TerminusDB server for push / pull / clone / fetch operations</p><p>Status: Stable</p><p>Arguments:</p><ul><li>credentials: (json - optional) the credentials to use to authenticate to the remote TerminusDB server<ul><li>type: (string - mandatory) either “jwt” or “basic”<li>key: (string - mandatory) either the jwt token or the basic auth password depending on the type field<li>user: (string - optional) the user id to use for basic authentication - defaults to “admin” Returns:</ul><li>(json) the current remote credentials as a json</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">local_auth</span><span class="p">({</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">jwt</span><span class="dl">"</span><span class="p">,</span> <span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">....</span><span class="dl">"</span><span class="p">})</span>
</code></pre></div></div><h3 id="databases"> <a href="#databases" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> databases</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">databases</span><span class="p">()</span>
</code></pre></div></div><p>Description: retrieves a list of databases (id, organization, label, comment) that the current user has access to on the server. Note that this requires the client to call connect() first.</p><p>Status: Stable</p><p>Arguments: None</p><p>Returns:</p><ul><li>(Array(json)) a list of databases the user has access to on the server, each having:<ul><li>id: (string) the id of the database<li>organization: (string) the id of the organization the database belongs to<li>label: (string) the display name of the database<li>comment: (string) the description text for the database</ul></ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">my_dbs</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">databases</span><span class="p">()</span>
</code></pre></div></div><h3 id="get-database"> <a href="#get-database" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> get database</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">get_database</span><span class="p">(</span><span class="nx">dbid</span><span class="p">,</span> <span class="nx">orgid</span><span class="p">)</span>
</code></pre></div></div><p>Description: Retrieves metadata (label, comment) about a particular database.</p><p>Status: Stable</p><p>Arguments:</p><ul><li>dbid (string - mandatory) the id of the database<li>orgid (string - optional) the id of the organization to which the database belongs (defaults to ‘admin’)</ul><p>Returns:</p><ul><li>(json) a json with fields representing metadata about the db:<ul><li>id: (string) the id of the database<li>organization: (string) the id of the organization the database belongs to<li>label: (string) the display name of the database<li>comment: (string) the description text for the database</ul></ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">my_db</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">get_database</span><span class="p">()</span>
</code></pre></div></div><h3 id="author"> <a href="#author" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> author</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">author</span><span class="p">(</span><span class="nx">author_id</span><span class="p">)</span>
</code></pre></div></div><p>Description: Gets / sets the string that will be written into the commit log for the current user</p><p>Status: Stable</p><p>Arguments:</p><ul><li>author_id (string - optional) the id to write into commit logs as the author string (normally an email address)</ul><p>Returns:</p><ul><li>(string) the current author id in use for the current user</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">author</span><span class="p">(</span><span class="dl">"</span><span class="s2">my@myemail.com</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><h3 id="set-system-db"> <a href="#set-system-db" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> set system db</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">set_system_db</span><span class="p">()</span>
</code></pre></div></div><p>Description: sets the internal client context to allow it to talk to the server’s internal system database</p><p>Status: Stable</p><p>Arguments: None</p><p>Returns: None</p><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="nx">set_system_db</span><span class="p">()</span>
</code></pre></div></div><h3 id="set"> <a href="#set" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> set</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span>
</code></pre></div></div><p>Description: sets several of the internal state values in a single call (similar to connect, but only sets internal client state, does not communicate with server)</p><p>Status: Stable</p><p>Arguments: (json - mandatory) opts - a json object with the following optional fields:</p><ul><li>organization: (string) the id of the organization to connect to (in desktop use, this will always be “admin”)<li>db: (string) the id of the database to connect to<li>local_auth: (json) a local auth configuration used to authenticate the client to the local server<li>key: (string) basic auth password<li>user: (string) basic auth username (always admin in desktop mode)<li>remote_auth: (json) a remote auth configuration - passed to the server to authenticate itself to remote servers during pull / push / clone / fork / fetch<li>branch: (string) id of branch to connect to (defaults to main)<li>ref: (string) id of the commit to connect to (defaults to head)<li>repo: (string) id of the repository to connect to (defaults to local)</ul><p>Returns: None</p><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">client</span><span class="p">.</span><span class="kd">set</span><span class="p">({</span><span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mypass</span><span class="dl">"</span><span class="p">,</span> <span class="na">branch</span><span class="p">:</span> <span class="dl">"</span><span class="s2">dev</span><span class="dl">"</span><span class="p">,</span> <span class="na">repo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">origin</span><span class="dl">"</span><span class="p">})</span>
</code></pre></div></div><h2 id="utility-functions"> <a href="#utility-functions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Utility Functions</h2><h3 id="copy"> <a href="#copy" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> copy</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">copy</span><span class="p">()</span>
</code></pre></div></div><p>Description: creates a copy of the client with identical internal state and context - useful if we want to change context for a particular API call without changing the current client context</p><p>Status: Stable</p><p>Arguments: None</p><p>Returns:</p><ul><li>(WOQLClient) new client object with identical state to original but which can be manipulated independently</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">tempClient</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">copy</span><span class="p">()</span>
</code></pre></div></div><h3 id="resource"> <a href="#resource" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> resource</h3><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span>
</code></pre></div></div><p>Description: generates a resource string for the required context</p><p>Arguments:</p><ul><li>type (string - mandatory) the type of resource string that is required - one of “db”, “meta”, “repo”, “commits”, “branch”, “ref”<li>val (string - optional) - can be used to specify a specific branch / ref - if not supplied the current context will be used</ul><p>Returns:</p><ul><li>(string) - a resource string for the desired context</ul><p>Example:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">branch_resource</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="dl">"</span><span class="s2">branch</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div><hr><footer role="contentinfo"><p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2020 - TerminusDB | Distributed by an <a href="https://github.com/terminusdb/terminusdb-server/blob/master/LICENSE">GPL-3.0 license.</a></p></footer></div></div></div></div><script> var o = document.querySelector(".header"), i = document.querySelector(".menu__body"), a = document.querySelector("#burger"); a && a.addEventListener("click", function () { a.classList.toggle("active"), o.classList.toggle("active"), i.classList.toggle("active"); }); window.addEventListener('resize',function(){ a.classList.remove("active"), o.classList.remove("active"), i.classList.remove("active"); }) </script>
